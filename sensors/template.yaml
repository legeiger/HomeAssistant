#https://home-assistant.io/components/sensor/

####################################################
#                                                  #
#                      TEMPLATE                    #
#                                                  #
####################################################

#https://home-assistant.io/components/sensor.template/
  - platform: template
    sensors:

      approxwattage:
        unit_of_measurement: 'W'
        value_template:  '{{states("sensor.ups_load")|int*9}}'
        
      operatingstate:
        value_template: "{{ state_attr('climate.linear_cooling', 'hvac_action') }}"

      sunset:
        value_template: '{% set timestamp = as_timestamp(states.sun.sun.attributes.next_setting) | timestamp_custom("%I:%M") %} {{ timestamp.lstrip("0") }}'
        unit_of_measurement: 'PM'

      sunrise:
        value_template: '{% set timestamp = as_timestamp(states.sun.sun.attributes.next_rising) | timestamp_custom("%I:%M") %} {{ timestamp.lstrip("0") }}'
        unit_of_measurement: 'AM'

      daylight:
        value_template: >
          {% set nr = as_timestamp(state_attr('sun.sun','next_rising')) %}
          {% set ns = as_timestamp(state_attr('sun.sun','next_setting')) %}
          {% if nr > ns %}
            {% set nr = nr - 60*60*24 %}
          {% endif %}
          {{ (ns - nr)|timestamp_custom('%H:%M',false) }}

      sensor_count:
        entity_id: []
        friendly_name: 'Number of Sensors'
        value_template: '{{ states.sensor | count }}'

      automation_count:
        entity_id: []
        friendly_name: 'Number of Automations'
        value_template: '{{ states.automation | count }}'

      script_count:
        entity_id: []
        friendly_name: 'Number of Scripts'
        value_template: '{{ states.script | count }}'

      switch_count:
        entity_id: []
        friendly_name: 'Number of Switches'
        value_template: '{{ states.switch | count }}'

      binary_sensor_count:
        entity_id: []
        friendly_name: 'Number of Binary Sensors'
        value_template: '{{ states.binary_sensor | count }}'

      lights_count:
        entity_id: []
        friendly_name: 'Number of Lights'
        value_template: '{{ states.light | count }}'

      tracker_count:
        entity_id: []
        friendly_name: 'Number of Devices'
        value_template: '{{ states.device_tracker | count }}'

      zwave_count:
        entity_id: []
        friendly_name: 'Zwave Devices'
        value_template: '{{ states.zwave | count }}'

####################################################
#                                                  #
#            END OF CONFIGURATION FILE             #
#                                                  #
####################################################
